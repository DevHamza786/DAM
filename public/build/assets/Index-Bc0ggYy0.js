import{r as x,l as b,m as j,W as p,c,o as u,a as l,u as n,g as M,w as r,b as e,e as S,i as A,h as I,S as y,j as g,k as P,t as h,F as V}from"./app-DV9BFyoD.js";import{_ as q}from"./AuthenticatedLayout-ppckJ223.js";import{d as H,D}from"./debounce-nUUzDNKZ.js";import"./ApplicationLogo-C3r3mCs9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex justify-between items-center"},T={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},U={class:"p-6 text-gray-900"},$={class:"mb-6"},E={class:"relative"},F={class:"flex items-center py-2"},W={class:"h-12 w-12 flex-shrink-0"},Q=["src","alt"],R={key:1,class:"h-12 w-12 rounded-lg bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center shadow-sm"},G=["href"],J={class:"font-semibold text-gray-700"},K={class:"flex justify-start space-x-3"},X=["onClick"],se={__name:"Index",props:{companies:{type:Object,required:!0}},setup(w){const a=w,_=[{text:"Logo",value:"logo",sortable:!1,width:100},{text:"Name",value:"name",sortable:!0},{text:"Assets",value:"assets_count",sortable:!1,width:80},{text:"Status",value:"status",sortable:!0,width:100},{text:"Actions",value:"actions",sortable:!1,width:150}],m=x({page:1,rowsPerPage:10,sortBy:"name",sortType:"asc"}),i=x(""),k=b(()=>a.companies.total),d=b(()=>a.companies.data||[]);j(()=>{m.value.page=a.companies.current_page,m.value.rowsPerPage=a.companies.per_page,console.log("Mounted: props.companies",a.companies),console.log("Mounted: tableItems",d.value)});const v=H(o=>{p.get(route("companies.index"),{search:i.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},300),C=o=>{console.log("Pagination event:",o),console.log("Before request: props.companies",a.companies),console.log("Before request: tableItems",d.value),p.get(route("companies.index"),{page:o.page,perPage:o.rowsPerPage,sort:o.sortBy,order:o.sortType,search:i.value},{preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{console.log("After request: Inertia page",t),console.log("After request: props.companies",a.companies),console.log("After request: tableItems",d.value)}})},B=o=>{confirm(`Are you sure you want to delete ${o.name}?`)&&p.delete(route("companies.destroy",o.id))};return(o,t)=>(u(),c(V,null,[l(n(M),{title:"Companies"}),l(q,null,{header:r(()=>[e("div",N,[t[3]||(t[3]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Companies",-1)),l(n(y),{href:o.route("companies.create"),class:"inline-flex items-center px-4 py-2 bg-black border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:r(()=>t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),g(" Add Company ")])),_:1,__:[2]},8,["href"])])]),default:r(()=>[e("div",T,[e("div",z,[e("div",L,[e("div",U,[e("div",$,[e("div",E,[t[4]||(t[4]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),S(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),onInput:t[1]||(t[1]=(...s)=>n(v)&&n(v)(...s)),placeholder:"Search companies by name, email, or phone...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,544),[[A,i.value]])])]),l(n(D),{headers:_,items:d.value,"server-options":m.value,"server-items-length":k.value,"onUpdate:options":C,"table-class-name":"customize-table","show-index":"",alternating:"","rows-items":[10,25,50,100],"rows-per-page-message":"Rows per page"},{"item-logo":r(({logo:s,name:f})=>[e("div",F,[e("div",W,[s?(u(),c("img",{key:0,src:"/storage/"+s,class:"h-12 w-12 rounded-lg object-cover shadow-sm",alt:f},null,8,Q)):(u(),c("div",R,t[5]||(t[5]=[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])))])])]),"item-name":r(s=>[e("a",{class:"font-medium text-gray-900 cursor-pointer hover:underline",href:o.route("assets.index",{company_id:s.id})},h(s.name),9,G)]),"item-assets_count":r(s=>[e("span",J,h(s.assets_count),1)]),"item-status":r(({is_active:s})=>[e("span",{class:P(["px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},h(s?"Active":"Inactive"),3)]),"item-actions":r(s=>[e("div",K,[l(n(y),{href:o.route("companies.edit",s.id),class:"inline-flex items-center text-indigo-600 hover:text-indigo-900"},{default:r(()=>t[6]||(t[6]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),g(" Edit ")])),_:2,__:[6]},1032,["href"]),s.assets_count===0?(u(),c("button",{key:0,onClick:f=>B(s),class:"inline-flex items-center text-red-600 hover:text-red-900"},t[7]||(t[7]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete ")]),8,X)):I("",!0)])]),_:1},8,["items","server-options","server-items-length"])])])])])]),_:1})],64))}};export{se as default};
